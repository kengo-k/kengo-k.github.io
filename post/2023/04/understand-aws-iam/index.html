
<!DOCTYPE html>
<html
  lang="ja"
  data-figures=""
  
    class="page"
  
  
  >
  <head>
<title>IAMをちゃんと使えてますか？AWSセキュリティの基本を理解しよう | Just Plain Notes</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DNHEVG3FDF"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-DNHEVG3FDF');
</script>





<meta property="og:locale" content="ja" />

<meta property="og:type" content="article">
<meta name="description" content="AWS IAMを使用してセキュリティを向上させるための基本的なガイド。MFAの設定方法、IAMポリシーの書き方、ロールを使用した権限管理について紹介します。" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:creator" content="@janedoe">
<meta name="twitter:title" content="IAMをちゃんと使えてますか？AWSセキュリティの基本を理解しよう" />
<meta name="twitter:image" content="https://just-plain-notes.blog/aws"/>
<meta property="og:url" content="https://just-plain-notes.blog/post/2023/04/understand-aws-iam/" />
<meta property="og:title" content="IAMをちゃんと使えてますか？AWSセキュリティの基本を理解しよう" />
<meta property="og:description" content="AWS IAMを使用してセキュリティを向上させるための基本的なガイド。MFAの設定方法、IAMポリシーの書き方、ロールを使用した権限管理について紹介します。" />
<meta property="og:image" content="https://just-plain-notes.blog/aws" />

<link rel="apple-touch-icon" sizes="180x180" href="https://just-plain-notes.blog/icons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://just-plain-notes.blog/icons/favicon-32x32.png">
<link rel="manifest" href="https://just-plain-notes.blog/icons/site.webmanifest">

<link rel="canonical" href="https://just-plain-notes.blog/post/2023/04/understand-aws-iam/">



<link rel="preload" href="https://just-plain-notes.blog/css/styles.d59ff3e6a23714b998f6430745df02f39227ae2192318e4dc7a17ae4990f16861a448619df434b2e6169016d1a04a2552ddcad5438576dbb38c7a830ae0cb9de.css" integrity = "sha512-1Z/z5qI3FLmY9kMHRd8C85InriGSMY5Nx6F65JkPFoYaRIYZ30NLLmFpAW0aBKJVLdytVDhXbbs4x6gwrgy53g==" as="style" crossorigin="anonymous">



<link rel="preload" href="https://just-plain-notes.blog/ja/js/bundle.2683a6735e1b94cf3d6339cea90b896ae22e2fc3e2a9ebe540b68fb02fd81e8d81624b51fff1237620201393c02783a6aedbfd8037394a4a3d6d979a9aad8b71.js" as="script" integrity=
"sha512-JoOmc14blM89YznOqQuJauIuL8PiqevlQLaPsC/YHo2BYktR//EjdiAgE5PAJ4Omrtv9gDc5Sko9bZeamq2LcQ==" crossorigin="anonymous">


<link rel="stylesheet" type="text/css" href="https://just-plain-notes.blog/css/styles.d59ff3e6a23714b998f6430745df02f39227ae2192318e4dc7a17ae4990f16861a448619df434b2e6169016d1a04a2552ddcad5438576dbb38c7a830ae0cb9de.css" integrity="sha512-1Z/z5qI3FLmY9kMHRd8C85InriGSMY5Nx6F65JkPFoYaRIYZ30NLLmFpAW0aBKJVLdytVDhXbbs4x6gwrgy53g==" crossorigin="anonymous">




  </head>
  <body
    data-code="7"
    data-lines="false"
    id="documentTop"
    data-lang="ja"
  >

<header class="nav_header" >
  <nav class="nav"><a href='https://just-plain-notes.blog/' class="nav_brand nav_item" title="Just Plain Notes">
    
    <span style="font-family: Chancery,cursive,LiSu,sans-serif; font-size: xx-large;">Just Plain Notes</span>
  <div class="nav_close">
    <div><svg class="icon">
  <title>open-menu</title>
  <use xlink:href="#open-menu"></use>
</svg>
<svg class="icon">
  <title>closeme</title>
  <use xlink:href="#closeme"></use>
</svg>
</div>
  </div>
</a>

    <div class='nav_body nav_body_left'>
      
      
      
        

  <div class="nav_parent">
    <a href="https://just-plain-notes.blog/" class="nav_item" title="Home">Home </a>
  </div>
  <div class="nav_parent">
    <a href="https://just-plain-notes.blog/about/" class="nav_item" title="About">About </a>
  </div>
      
      <div class="nav_parent">
        <a href="#" class="nav_item">🌐</a>
        <div class="nav_sub">
          <span class="nav_child"></span>
          
          <a href="https://just-plain-notes.blog/" class="nav_child nav_item">Japanese</a>
          
          <a href="https://just-plain-notes.blog/en/" class="nav_child nav_item">English</a>
          
        </div>
      </div>
<div class='follow'>
  <a href="https://github.com/kengo-k">
    <svg class="icon">
  <title>github</title>
  <use xlink:href="#github"></use>
</svg>

  </a>
  <a href="https://twitter.com/kengoku123">
    <svg class="icon">
  <title>twitter</title>
  <use xlink:href="#twitter"></use>
</svg>

  </a>
    
  <a href="https://just-plain-notes.blog/index.xml">
    <svg class="icon">
  <title>rss</title>
  <use xlink:href="#rss"></use>
</svg>

  </a>
<div class="color_mode">
  <input type="checkbox" class="color_choice" id="mode">
</div>

</div>

    </div>
  </nav>
</header>

    <main>
  
<div class="grid-inverse wrap content">
  <article class="post_content ">
    <h1 class="post_title">IAMをちゃんと使えてますか？AWSセキュリティの基本を理解しよう</h1>
  <div class="post_meta">
    <span><svg class="icon">
  <title>calendar</title>
  <use xlink:href="#calendar"></use>
</svg>
</span>
    <span class="post_date">
      Apr 8, 2023</span>
    <span class="post_time"> · 3 min read</span><span>&nbsp;· <a href='https://just-plain-notes.blog/tags/aws/' title="aws" class="post_tag button button_translucent">aws
        </a><a href='https://just-plain-notes.blog/tags/cloud/' title="cloud" class="post_tag button button_translucent">cloud
        </a>
    </span>
    <span class="page_only">&nbsp;·
  <div class="post_share">
    Share on:
    <a href="https://twitter.com/intent/tweet?text=IAM%e3%82%92%e3%81%a1%e3%82%83%e3%82%93%e3%81%a8%e4%bd%bf%e3%81%88%e3%81%a6%e3%81%be%e3%81%99%e3%81%8b%ef%bc%9fAWS%e3%82%bb%e3%82%ad%e3%83%a5%e3%83%aa%e3%83%86%e3%82%a3%e3%81%ae%e5%9f%ba%e6%9c%ac%e3%82%92%e7%90%86%e8%a7%a3%e3%81%97%e3%82%88%e3%81%86&url=https%3a%2f%2fjust-plain-notes.blog%2fpost%2f2023%2f04%2funderstand-aws-iam%2f&tw_p=tweetbutton" class="twitter" title="Share on Twitter" target="_blank" rel="nofollow">
      <svg class="icon">
  <title>twitter</title>
  <use xlink:href="#twitter"></use>
</svg>

    </a>
    <a href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fjust-plain-notes.blog%2fpost%2f2023%2f04%2funderstand-aws-iam%2f&t=IAM%e3%82%92%e3%81%a1%e3%82%83%e3%82%93%e3%81%a8%e4%bd%bf%e3%81%88%e3%81%a6%e3%81%be%e3%81%99%e3%81%8b%ef%bc%9fAWS%e3%82%bb%e3%82%ad%e3%83%a5%e3%83%aa%e3%83%86%e3%82%a3%e3%81%ae%e5%9f%ba%e6%9c%ac%e3%82%92%e7%90%86%e8%a7%a3%e3%81%97%e3%82%88%e3%81%86" class="facebook" title="Share on Facebook" target="_blank" rel="nofollow">
      <svg class="icon">
  <title>facebook</title>
  <use xlink:href="#facebook"></use>
</svg>

    </a>
    <a href="#linkedinshare" id = "linkedinshare" class="linkedin" title="Share on LinkedIn" rel="nofollow">
      <svg class="icon">
  <title>linkedin</title>
  <use xlink:href="#linkedin"></use>
</svg>

    </a>
    <a href="https://just-plain-notes.blog/post/2023/04/understand-aws-iam/" title="Copy Link" class="link link_yank">
      <svg class="icon">
  <title>copy</title>
  <use xlink:href="#copy"></use>
</svg>

    </a>
  </div>
  </span>
  </div>
<div class="post_featured">
        










  















  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/top_hue13919908cef6ef54c42cca7e9806848_1045157_1080x0_resize_q50_h2_box.webp" width="1080" height="608">
  


      </div>
    <div class="post_body"><h2 id="今回やること">今回やること</h2>
<p>これまで、個人でAWSを触るときは何も気にせずルートアカウントを使っていました。
本記事では最低限の権限を持つIAMユーザとロールを作成し、ルートアカウントを使わずに作業ができる環境を構築することを目指します。</p>

<div class="notices warning">
    <div class="label">注意事項</div>
    <p>実務でAWSの権限管理をしたことがない素人が記事を書いております。
もちろん記事は実際に動作確認などを行なった上で掲載していますが、AWS運用のベストプラクティスに従っていない内容を含んでいる可能性もあります。
IAMを利用した権限管理の基本的な作業フローを把握するためのもの、という程度の認識で見てもらえると助かります(言い訳)。</p>

  </div>

<h2 id="ルートアカウントにmfaを設定する">ルートアカウントにMFAを設定する</h2>
<p>本題に入る前に、最初にルートアカウントにMFA(マルチファクタ認証)を設定します。
MFAはパスワードだけではなく追加の認証要素（例えば携帯電話に送られたワンタイムパスワードなど）を必要とする認証方法です。
MFAを設定することで、パスワードが盗まれたとしても攻撃者がアカウントにアクセスするのを防ぐことができます。</p>
<p>次の手順でMFAを設定します。</p>
<ul>
<li>AWSのルートアカウントでAWSマネジメントコンソールにログインします。</li>
<li>画面右上のアカウント名の部分をクリックしてメニューを表示し、「セキュリティ認証情報」をクリックします。</li>
</ul>


















  















  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/1-enter-setup-mfa_hu4266d05c703a7cf20e2492634544886d_66807_480x0_resize_q50_h2_box_3.webp" width="480" height="531">
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



<ul>
<li>「セキュリティ認証情報(ルートユーザ)」画面の「MFAを割り当てる」ボタンをクリックします。</li>
</ul>

















  
















  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/2-apply-mfa_hu66b7f8145f05a044bbb81cde26e793b4_310456_720x0_resize_q50_h2_box_3.webp" width="720" height="342">
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



<p>「MFAデバイスを選択」画面にて必要な情報を入力します。</p>
<ul>
<li>「デバイス名」に任意の名前を設定します。ここではgoogle-authenticatorと設定しました。</li>
<li>「MFAデバイス」に「認証アプリケーション」を選択します。</li>
<li>「次へ」をクリックします。</li>
</ul>


















  















  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/3-setup-mfa-device_hu20f07e01114bcd2f1342bf6bf7ceda2c_399900_480x0_resize_q50_h2_box_3.webp" width="480" height="735">
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



<p>デバイスの設定画面が開きます。</p>

















  
















  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/4-setup-authenticator_hua658f3f0f2085d95f4306e9fde62f43e_362203_720x0_resize_q50_h2_box_3.webp" width="720" height="517">
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



<p>表示されたQRコードを読み取るための認証アプリケーションをインストールします。</p>
<p>ここではChrome拡張機能の「Authenticator」を使用します。</p>

















  
















  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/5-install-authenticator_hua6c8530f45fe88ca19dece3a85bce033_195767_720x0_resize_q50_h2_box_3.webp" width="720" height="292">
  

  
  

  
  

  
  

  
  

  
  

  
  



<p>↑をインストールします。</p>
<p>Authenticatorを使用して先ほどのQRコードを読み取ります。</p>
<ul>
<li>Chromeのアドレスバーの右にあるQRコードのアイコンをクリックします。</li>
<li>表示されたウィンドウ内の赤枠で囲ったボタンをクリックします。</li>
<li>範囲選択するモードになるのでQRコードを選択し読み取ります。</li>
</ul>


















  















  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/6-read-qrcode_hu26ce153d09c5a579332d778e6e9d1ed4_60156_480x0_resize_q50_h2_box_3.webp" width="480" height="770">
  

  
  

  
  

  
  

  
  

  
  



<p>QRコードの読み取りに成功すると次のダイアログが表示されます。</p>

















  
















  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/7-added-authenticator_hu73285cb7575f8e04d7ced825fdc2ac68_47108_720x0_resize_q50_h2_box_3.webp" width="720" height="223">
  

  
  

  
  

  
  

  
  



<p>Authenticatorを使用してデバイスの設定画面に二つのMFAコードを入力します。</p>
<p>MFAコードを入力したら「MFAを追加」ボタンをクリックします。</p>

















  
















  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/8-enter-mfa-code_hu3cc9d7c29b1a21c8a8d396d5de8c854d_369882_720x0_resize_q50_h2_box_3.webp" width="720" height="520">
  

  
  

  
  

  
  



<p>セキュリティ認証情報(ルートユーザー)画面に戻ります。
多要素認証(MFA)一覧に新しいデバイスが追加されていればOKです。</p>

















  
















  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/9-finish-setup-mfa_hu980386ebb3e0300908bc884d9fdec452_524230_1280x0_resize_q50_h2_box_3.webp" width="1280" height="589">
  

  
  

  
  



<h2 id="ルートアカウントのアクセスキーを削除する">ルートアカウントのアクセスキーを削除する</h2>
<p>ルートアカウントにアクセスキーを設定している場合は削除します。
ルートアカウントは全てのリソースにアクセスできる特権を持つため、アクスセスキーの盗難や操作ミスによる事故が起きた時の被害を最小限にとどめるため、ルートアカウントはアクセスキーを持たないようにします。</p>
<p>ルートアカウントにアクセスキーが設定されているとIAMダッシュボードに警告が表示されます。</p>

















  
















  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/10-show-root-accesskey-warning_hucb3a671986a160543507f80d3c96b64f_189451_1280x0_resize_q50_h2_box_3.webp" width="1280" height="197">
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



<p>「アクセスキーを管理」から登録されているアクセスキーを削除します。</p>

















  
















  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/11-list-root-accesskey_hu0408afa0147ef0c47c7ecc95de833776_613609_1280x0_resize_q50_h2_box_3.webp" width="1280" height="429">
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



<p>700日以上前からルートアカウントのアクセスキーがずっと設定されていたようです（恐ろしい)。
アクセスキーの削除後に警告が消えていればOKです。</p>

















  
















  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/12-clear-root-accesskey-warning_hucda2fd478e3902d886a1468c5890239e_180099_1280x0_resize_q50_h2_box_3.webp" width="1280" height="194">
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



<p>ルートアカウントに対して最低限の設定をすることができました。
本記事の以降に紹介する設定を行うことで、IAMユーザ(およびロール)のみで日常的な作業を完結できるようになるため、
ルートアカウントを使用する機会を極力減らすことができるようになります。</p>
<p>ということでここからが本題になります。</p>
<h2 id="作成するリソースを検討する">作成するリソースを検討する</h2>
<p>作業の手順としては、最初にポリシーを作成し、次に作成したポリシーをユーザー/グループ/ロールにアタッチしていくことになります。
まずは作成すべきポリシーを洗い出すために、どのようなユーザ/グループ/ロールが必要になるかを検討します。</p>
<h3 id="ユーザの検討">ユーザの検討</h3>
<p>開発者用ユーザdev-userを作成します。dev-userには直接ポリシーを設定しません。
代わりに必要なポリシーを設定したグループを作成し、dev-userはそのグループに所属します。ユーザーに直接ポリシーを設定することも可能ですが、
ユーザが増えた場合、個々のユーザに対し都度ポリシーを設定する作業が必要になります。</p>
<h3 id="グループの検討">グループの検討</h3>
<p>下記の二つのグループを作成します。</p>
<ul>
<li>developer</li>
<li>developer-base</li>
</ul>
<p>developerグループは開発対象の具体的なサービス(今回はLambdaとS3を想定)に関するポリシーを設定します。</p>
<p>developer-baseグループには開発全般で必要となる基本的なポリシーを設定します。具体的には、</p>
<ol>
<li>MFAを設定できる</li>
<li>アクセスキーを作成できる</li>
<li>ロールの引き受けができる</li>
<li>ロールの移譲ができる</li>
<li>ロールを一覧表示できる</li>
</ol>
<p>上記の操作を実行できるようにします。1&amp;2は特に解説する必要がないと思いますが、3〜5については軽く触れておきます。</p>
<p>まず「ロールの引き受け」とはマネージメントコンソール画面での「ロールの切り替え」ボタンのクリックに相当するものです。
本番環境のリソースにアクセスする際に、一時的に本番用ロールに切り替えて作業をした経験がある方は多いと思います。英語の表現的には
ロールをAssumeする(引き受ける)、と言うようです。</p>
<p>次に「ロールの委譲」についてですが、文字通りの意味でロールを渡すことができるようになります。
これが必要になる例としてはLambda関数の作成時があります。
例えばLambda関数がS3にアクセスするためには、S3にアクセスするためのロールをLambdaに渡さなければなりません。
ロールを渡すためにはLambda関数を作成するユーザが「ロールを委譲」する権限を持たなければなりません。</p>
<p>最後に「ロールの一覧表示」ですが、こちらもLambda関数の作成時を例にします。
マネージメントコンソールからLambda関数を作成する時にLambdaに渡すロールをロール一覧の中から選択できます。
その際にロールの一覧表示をする権限が必要となります。</p>
<h3 id="ロールの検討">ロールの検討</h3>
<p>下記の二つのロールを作成します。</p>
<ul>
<li>admin</li>
<li>exec-lambda</li>
</ul>
<p>adminロールは開発以外の管理系の作業を行うためのロールです。ロールではなく別ユーザを用意しても構いません。
ただし、結局操作するのは自分ひとりしかいないため、今回はロールにすることにしました。
別ユーザにしてしまうとログアウトして入り直すという作業が必要になるので手間が増えるためです。</p>
<p>exec-lambdaロールはLambda実行時のロールです。
Lambda関数の作成時にLambdaに渡します。
S3へアクセスする最小の権限を設定します。</p>
<h3 id="ポリシーを作成する">ポリシーを作成する</h3>
<p>必要なポリシーの洗い出しができたので実際にポリシーを作成していきます。
そもそもポリシーとはなんぞやですが、ポリシーは「あるリソースに対する操作を許可するか拒否するか」を記述したもので以下のような形式を持つJSONです。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl">    <span class="nt">&#34;Version&#34;</span><span class="p">:</span> <span class="s2">&#34;2012-10-17&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">    <span class="nt">&#34;Statement&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="ln"> 4</span><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">            <span class="nt">&#34;Effect&#34;</span><span class="p">:</span> <span class="s2">&#34;Allow&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">            <span class="nt">&#34;Action&#34;</span><span class="p">:</span> <span class="s2">&#34;lambda:*&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">            <span class="nt">&#34;Resource&#34;</span><span class="p">:</span> <span class="s2">&#34;arn:aws:lambda:ap-northeast-1:&lt;account-id&gt;:function:&lt;function-name&gt;&#34;</span>
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="ln">10</span><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>作成したポリシーはユーザ/グループ/ロールに付与(アタッチ)することで機能します。</p>
<p>Actionには操作を指定します。上記の例ではLambdaに関連するすべての操作(lambda:*)を意味します。
Lambdaの場合、関数の作成/実行/削除/etcといったことを表します。そしてEffectでその操作を許可(Allow)するか拒否(Deny)するかを指定します。</p>
<p>ResourceにはActionで指定した操作の対象となるリソース名を指定します。Resourceに指定するリソースの種類はActionに対応するものになります。つまりActionがS3であればバケット名、LambdaであればFunction名という感じです。リソース名の記述にはARNという形式を使います。ARNは一般的に以下のような形式を持ちます：</p>
<blockquote>arn:aws:&lt;サービス名&gt;:&lt;リージョン名&gt;:&lt;アカウントID&gt;:・・・<br /></blockquote>

<p>実際には個々のサービスによって「:」で区切られた要素の数や種類は異なります。例えばS3バケットのARNは</p>
<blockquote>arn:aws:s3:::&lt;バケット名&gt;<br /></blockquote>

<p>となり、リージョン名やアカウントIDは指定しません。これはS3のバケット名が全世界で一意になる必要があるからです。</p>
<p>それでは実際にポリシーを実装していきます。</p>
<h4 id="enable-mfa">enable-mfa</h4>
<p>MFAを設定可能にするポリシーです。ルートアカウントだけでなくログイン操作をする全てのユーザはMFAを設定するべきです。
そのため、これから作成するユーザもMFAを設定可能にしておきます。</p>
<p>IAMの画面を開き「ポリシー」を選択します。</p>


















  















  
  

  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/13-click-policy_hu24e638047561b17c6087e45173af493d_69679_300x0_resize_q50_h2_box_3.webp" width="300" height="483">
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



<p>ポリシ一の一覧画面から「ポリシーを作成」ボタンをクリックします。</p>

















  
















  
  

  
  

  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/14-click-create-policy_hu44351e1799488ed3ec77502faffc6658_187634_1280x0_resize_q50_h2_box_3.webp" width="1280" height="208">
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



<p>ポリシー作成画面が開きます。「JSON」をクリックしJSONエディターから直接JSONを編集します。</p>

















  
















  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/15-show-policy-editor_hu69da8ff9d969b9974843a0c5b36edba8_274246_1280x0_resize_q50_h2_box_3.webp" width="1280" height="355">
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



<p>JSONエディターに以下の内容のJSONを設定します。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl">    <span class="nt">&#34;Version&#34;</span><span class="p">:</span> <span class="s2">&#34;2012-10-17&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">    <span class="nt">&#34;Statement&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="ln"> 4</span><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">            <span class="nt">&#34;Effect&#34;</span><span class="p">:</span> <span class="s2">&#34;Allow&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">            <span class="nt">&#34;Action&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">                <span class="s2">&#34;iam:CreateVirtualMFADevice&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">                <span class="s2">&#34;iam:DeleteVirtualMFADevice&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">                <span class="s2">&#34;iam:ListVirtualMFADevices&#34;</span>
</span></span><span class="line"><span class="ln">10</span><span class="cl">            <span class="p">],</span>
</span></span><span class="line"><span class="ln">11</span><span class="cl">            <span class="nt">&#34;Resource&#34;</span><span class="p">:</span> <span class="s2">&#34;arn:aws:iam::&lt;account-id&gt;:mfa/*&#34;</span>
</span></span><span class="line"><span class="ln">12</span><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="ln">13</span><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="ln">14</span><span class="cl">            <span class="nt">&#34;Effect&#34;</span><span class="p">:</span> <span class="s2">&#34;Allow&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln">15</span><span class="cl">            <span class="nt">&#34;Action&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="ln">16</span><span class="cl">                <span class="s2">&#34;iam:EnableMFADevice&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln">17</span><span class="cl">                <span class="s2">&#34;iam:ResyncMFADevice&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln">18</span><span class="cl">                <span class="s2">&#34;iam:ListMFADevices&#34;</span>
</span></span><span class="line"><span class="ln">19</span><span class="cl">            <span class="p">],</span>
</span></span><span class="line"><span class="ln">20</span><span class="cl">            <span class="nt">&#34;Resource&#34;</span><span class="p">:</span> <span class="s2">&#34;arn:aws:iam::&lt;account-id&gt;:user/${aws:username}&#34;</span>
</span></span><span class="line"><span class="ln">21</span><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="ln">22</span><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="ln">23</span><span class="cl">            <span class="nt">&#34;Effect&#34;</span><span class="p">:</span> <span class="s2">&#34;Allow&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln">24</span><span class="cl">            <span class="nt">&#34;Action&#34;</span><span class="p">:</span> <span class="s2">&#34;iam:DeactivateMFADevice&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln">25</span><span class="cl">            <span class="nt">&#34;Resource&#34;</span><span class="p">:</span> <span class="s2">&#34;arn:aws:iam::&lt;account-id&gt;:user/${aws:username}&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln">26</span><span class="cl">            <span class="nt">&#34;Condition&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">27</span><span class="cl">                <span class="nt">&#34;BoolIfExists&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">28</span><span class="cl">                    <span class="nt">&#34;aws:MultiFactorAuthPresent&#34;</span><span class="p">:</span> <span class="s2">&#34;true&#34;</span>
</span></span><span class="line"><span class="ln">29</span><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="ln">30</span><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="ln">31</span><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="ln">32</span><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="ln">33</span><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>個々のActionで記述した厳密な意味はほとんど理解していません(ごめんなさい)。基本的にChatGPTに書いてもらっています。
「名前を見た感じMFAデバイスを削除したり一覧表示したりするのに必要なものだろうなー」くらいの感覚です(今はそれで十分だろうと思ってます)。</p>
<p>上記JSONの<code>&lt;account-id&gt;</code>は、自分が使用している実際のアカウントIDで置き換えてください。JSONの編集後、JSONエディタの下部にある「次へ」をクリックし確認画面を表示します。ポリシー名を入力し、画面下部の「ポリシーの作成」ボタンをクリックします。</p>

















  
















  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/16-create-policy_huf7550c66b8a4e40737acef037b00ed55_150944_1280x0_resize_q50_h2_box_3.webp" width="1280" height="319">
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



<p>以上の操作でポリシーが作成されます。</p>
<h4 id="enable-accesskey">enable-accesskey</h4>
<p>アクセスキーの作成を可能にします。操作手順については、先ほどと同様ですので、以降はJSONのみを掲載します。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl">    <span class="nt">&#34;Version&#34;</span><span class="p">:</span> <span class="s2">&#34;2012-10-17&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">    <span class="nt">&#34;Statement&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="ln"> 4</span><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">            <span class="nt">&#34;Effect&#34;</span><span class="p">:</span> <span class="s2">&#34;Allow&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">            <span class="nt">&#34;Action&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">                <span class="s2">&#34;iam:CreateAccessKey&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">                <span class="s2">&#34;iam:DeleteAccessKey&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">                <span class="s2">&#34;iam:ListAccessKeys&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln">10</span><span class="cl">                <span class="s2">&#34;iam:UpdateAccessKey&#34;</span>
</span></span><span class="line"><span class="ln">11</span><span class="cl">            <span class="p">],</span>
</span></span><span class="line"><span class="ln">12</span><span class="cl">            <span class="nt">&#34;Resource&#34;</span><span class="p">:</span> <span class="s2">&#34;arn:aws:iam::&lt;account-id&gt;:user/${aws:username}&#34;</span>
</span></span><span class="line"><span class="ln">13</span><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="ln">14</span><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="ln">15</span><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h4 id="enable-role-assume">enable-role-assume</h4>
<p>ロールの引き受けを可能にします。管理用の作業を行う際に一時的にロールを切り替えるために使用します。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl">    <span class="nt">&#34;Version&#34;</span><span class="p">:</span> <span class="s2">&#34;2012-10-17&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">    <span class="nt">&#34;Statement&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="ln"> 4</span><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">            <span class="nt">&#34;Effect&#34;</span><span class="p">:</span> <span class="s2">&#34;Allow&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">            <span class="nt">&#34;Action&#34;</span><span class="p">:</span> <span class="s2">&#34;sts:AssumeRole&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">            <span class="nt">&#34;Resource&#34;</span><span class="p">:</span> <span class="s2">&#34;arn:aws:iam::&lt;account-id&gt;:role/&lt;role-name&gt;&#34;</span>
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="ln">10</span><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p><code>&lt;role-name&gt;</code>には引き受けを許可するロール名を指定します。ここではadminを指定します。</p>

<div class="notices info">
    <div class="label">MEMO</div>
    <p>ロール名にワイルドカード(*)を指定できます。ただしその場合、権限を渡しすぎている旨のワーニングが出ます。</p>

  </div>

<h4 id="enable-pass-role">enable-pass-role</h4>
<p>ロールの委譲を可能にします。主にロールを必要とするサービス(EC2、Lambda、etc)に対しロールを渡すために使用します。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl">	<span class="nt">&#34;Version&#34;</span><span class="p">:</span> <span class="s2">&#34;2012-10-17&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">	<span class="nt">&#34;Statement&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="ln"> 4</span><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">            <span class="nt">&#34;Effect&#34;</span><span class="p">:</span> <span class="s2">&#34;Allow&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">            <span class="nt">&#34;Action&#34;</span><span class="p">:</span> <span class="s2">&#34;iam:PassRole&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">            <span class="nt">&#34;Resource&#34;</span><span class="p">:</span> <span class="s2">&#34;arn:aws:iam::&lt;account-id&gt;:role/&lt;role-name&gt;&#34;</span>
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">	<span class="p">]</span>
</span></span><span class="line"><span class="ln">10</span><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p><code>&lt;role-name&gt;</code>には委譲を許可するロール名を指定します。ここではexec-lambdaを指定します。</p>
<h4 id="enable-list-roles">enable-list-roles</h4>
<p>ロールの一覧表示を可能にします。コンソール画面でロールの一覧を表示する必要がある際に使用します。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl">    <span class="nt">&#34;Version&#34;</span><span class="p">:</span> <span class="s2">&#34;2012-10-17&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">    <span class="nt">&#34;Statement&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="ln"> 4</span><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">            <span class="nt">&#34;Effect&#34;</span><span class="p">:</span> <span class="s2">&#34;Allow&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">            <span class="nt">&#34;Action&#34;</span><span class="p">:</span> <span class="s2">&#34;iam:ListRoles&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">            <span class="nt">&#34;Resource&#34;</span><span class="p">:</span> <span class="s2">&#34;*&#34;</span>
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="ln">10</span><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h4 id="manage-iam">manage-iam</h4>
<p>IAMに関する全ての操作を行うことができる管理用のポリシーです。このポリシーは後に作成するadminロールに付与します。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl">    <span class="nt">&#34;Version&#34;</span><span class="p">:</span> <span class="s2">&#34;2012-10-17&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">    <span class="nt">&#34;Statement&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="ln"> 4</span><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">            <span class="nt">&#34;Effect&#34;</span><span class="p">:</span> <span class="s2">&#34;Allow&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">            <span class="nt">&#34;Action&#34;</span><span class="p">:</span> <span class="s2">&#34;iam:*&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">            <span class="nt">&#34;Resource&#34;</span><span class="p">:</span> <span class="s2">&#34;*&#34;</span>
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="ln">10</span><span class="cl">            <span class="nt">&#34;Effect&#34;</span><span class="p">:</span> <span class="s2">&#34;Allow&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln">11</span><span class="cl">            <span class="nt">&#34;Action&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="ln">12</span><span class="cl">                <span class="s2">&#34;access-analyzer:ValidatePolicy&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln">13</span><span class="cl">                <span class="s2">&#34;access-analyzer:ListPolicyGenerations&#34;</span>
</span></span><span class="line"><span class="ln">14</span><span class="cl">            <span class="p">],</span>
</span></span><span class="line"><span class="ln">15</span><span class="cl">            <span class="nt">&#34;Resource&#34;</span><span class="p">:</span> <span class="s2">&#34;*&#34;</span>
</span></span><span class="line"><span class="ln">16</span><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="ln">17</span><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="ln">18</span><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>access-analyzerはポリシー生成をサポートしてくれる有益な情報を提供してくれるものです。
これらの権限がない場合、赤字で警告が出てくるため、とりあえず追加しておきました。</p>
<h4 id="develop-lambda">develop-lambda</h4>
<p>Lambda開発に必要な権限を定義するポリシーです。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl">    <span class="nt">&#34;Version&#34;</span><span class="p">:</span> <span class="s2">&#34;2012-10-17&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">    <span class="nt">&#34;Statement&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="ln"> 4</span><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">            <span class="nt">&#34;Effect&#34;</span><span class="p">:</span> <span class="s2">&#34;Allow&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">            <span class="nt">&#34;Action&#34;</span><span class="p">:</span> <span class="s2">&#34;lambda:*&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">            <span class="nt">&#34;Resource&#34;</span><span class="p">:</span> <span class="s2">&#34;*&#34;</span>
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="ln">10</span><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h4 id="develop-s3">develop-s3</h4>
<p>S3開発に必要な権限を定義するポリシーです。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl">    <span class="nt">&#34;Version&#34;</span><span class="p">:</span> <span class="s2">&#34;2012-10-17&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">    <span class="nt">&#34;Statement&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="ln"> 4</span><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">            <span class="nt">&#34;Effect&#34;</span><span class="p">:</span> <span class="s2">&#34;Allow&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">            <span class="nt">&#34;Action&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">                <span class="s2">&#34;s3:*&#34;</span>
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">            <span class="p">],</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">            <span class="nt">&#34;Resource&#34;</span><span class="p">:</span> <span class="s2">&#34;arn:aws:s3:::*/*&#34;</span>
</span></span><span class="line"><span class="ln">10</span><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="ln">11</span><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="ln">12</span><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h4 id="editable-s3-object">editable-s3-object</h4>
<p>exec-lambdaロールに付与するポリシーです。
オブジェクトのCRUDのみを可能とする必要最低限の権限を持ちます。
バケットの作成権限はないので、マネージメントコンソールから手動でバケットを作成する前提とします。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl">    <span class="nt">&#34;Version&#34;</span><span class="p">:</span> <span class="s2">&#34;2012-10-17&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">    <span class="nt">&#34;Statement&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="ln"> 4</span><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">            <span class="nt">&#34;Effect&#34;</span><span class="p">:</span> <span class="s2">&#34;Allow&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">            <span class="nt">&#34;Action&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">                <span class="s2">&#34;s3:PutObject&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">                <span class="s2">&#34;s3:GetObject&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">                <span class="s2">&#34;s3:DeleteObject&#34;</span>
</span></span><span class="line"><span class="ln">10</span><span class="cl">            <span class="p">],</span>
</span></span><span class="line"><span class="ln">11</span><span class="cl">            <span class="nt">&#34;Resource&#34;</span><span class="p">:</span> <span class="s2">&#34;arn:aws:s3:::*/*&#34;</span>
</span></span><span class="line"><span class="ln">12</span><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="ln">13</span><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="ln">14</span><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>以上で全てのポリシーの作成が完了しました。</p>
<h3 id="グループの作成">グループの作成</h3>
<p>ユーザーはグループに所属する必要があるため先にグループを作成します。</p>
<h4 id="developerグループ">developerグループ</h4>
<p>IAMのユーザーグループ画面から「グループを作成」をクリックします。</p>

















  
















  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/17-show-group-list_hue6c037d32a06dff2ac492538a8afcb9c_194837_1280x0_resize_q50_h2_box_3.webp" width="1280" height="200">
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



<p>ユーザーグループ作成画面が表示されます。グループ名を入力します。</p>

















  
















  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/18-set-new-group-name_hud264eea07204287966340b215ee06a76_145951_500x0_resize_q50_h2_box_3.webp" width="500" height="204">
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



<p>画面を下にスクロールするとアタッチするポリシーの一覧が表示されます。</p>
<ul>
<li>develop-lambda</li>
<li>develop-s3</li>
</ul>
<p>をチェックし、画面最下部にある「グループを作成」ボタンをクリックします。</p>

















  
















  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/19-set-policy-to-group_hu14c0af86902a6c23855d2b93f9df83bd_344450_1280x0_resize_q50_h2_box_3.webp" width="1280" height="474">
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



<p>以上の操作でグループを作成できます。</p>
<h4 id="developer-baseグループ">developer-baseグループ</h4>
<p>上記と同じ操作でdeveloper-baseグループを作成します。ポリシーには</p>
<ul>
<li>enable-accesskey</li>
<li>enable-list-roles</li>
<li>enable-mfa</li>
<li>enable-role-assume</li>
<li>enable-role-pass</li>
</ul>
<p>を指定します。</p>
<h3 id="ユーザの作成">ユーザの作成</h3>
<p>IAMのユーザー画面から「ユーザーを追加」ボタンをクリックします。</p>

















  
















  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/19.1-click-add-user_hu980d5a6d9168ab36bbdd3fdfdb56819d_212752_1280x0_resize_q50_h2_box_3.webp" width="1280" height="190">
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



<p>「ユーザー名」をdev-user、「AWSマネジメントコンソールへのユーザーアクセスを提供する」をチェックONにします。
パスワードの設定は任意の方法でOKです。今回は自動生成されたパスワードをそのまま使います。</p>

















  
















  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/19.2-create-dev-user_hu3777c3ec490e0b4de6e531ef2c8d77ef_485482_1280x0_resize_q50_h2_box_3.webp" width="1280" height="553">
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



<p>ユーザに権限を設定する方法を選択します。
事前に検討した通り、ここではユーザをグループに所属させることにしたので「ユーザーをグループに追加」を選択します。
そして下部に表示されている二つのグループのチェックをONにして「次へ」ボタンをクリックします。</p>

















  
















  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/19.3-set-group_hu06cbf1024d2a8462074f35761a808030_477975_1280x0_resize_q50_h2_box_3.webp" width="1280" height="532">
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



<p>最後に確認画面が表示されるので作成ボタンをクリックしユーザーが正常に作成できればOKです。
「.csvファイルをダウンロード」をクリックし認証情報を記載したCSVファイルを必ずダウンロードしておきます。</p>

















  
















  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/19.4-finish-create-user_hu125158144e398aa8751bdfa58f0a425e_333754_1280x0_resize_q50_h2_box_3.webp" width="1280" height="424">
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



<p>作成後のdev-userが以下の状態になっていればOKです。</p>

















  
















  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/20-create-user-success_huf8a8f287a8818569f1865334e5347a56_247323_1280x0_resize_q50_h2_box_3.webp" width="1280" height="263">
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



<h3 id="ロールの作成">ロールの作成</h3>
<h4 id="adminロール">adminロール</h4>
<p>IAMのロール画面から「ロールを作成」ボタンをクリックします。</p>

















  
















  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/21-show-role-list_hu4a31d4a6779a5f6ced983379f5196fe9_195836_1280x0_resize_q50_h2_box_3.webp" width="1280" height="205">
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



<p>「信頼されたエンティティを選択」画面が表示されます。
adminロールはdev-userがロール切り替えするために使用するので、ここでは「AWSアカウント」を選択し「次へ」をクリックします。</p>

















  
















  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/22-set-entity-type_hu3fc3301260be3dc460dbd8a68575fd94_439200_1280x0_resize_q50_h2_box_3.webp" width="1280" height="540">
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



<p>以降は、グループの時と同様にアタッチするポリシーを選択します。ここでは</p>
<ul>
<li>manage-iam</li>
</ul>
<p>を選択します。</p>
<h4 id="exec-lambdaロール">exec-lambdaロール</h4>
<p>基本的な手順はadminロールの時と同様です。ただし「信頼されたエンティティを選択」画面では、エンティティタイプとして「AWSのサービス」、ユースケースでは「Lambda」を選択します。</p>

















  
















  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/23-set-entity-type-for-lambda_hu91992de4c82132a210e13ec03b5d73bb_420420_1280x0_resize_q50_h2_box_3.webp" width="1280" height="544">
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



<p>アタッチするポリシーは、</p>
<ul>
<li>editable-s3-object</li>
</ul>
<p>を選択します。</p>
<h2 id="動作確認">動作確認</h2>
<p>これで全ての作業が完了したので動作確認を行います。</p>
<h3 id="ログイン">ログイン</h3>
<p>まずはルートアカウントからログアウトしdev-userでログインします。
「IAMユーザ」を選択しアカウントIDを入力して「次へ」をクリックします。</p>


















  















  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/24-signin-by-iam-user_hudc3847ff84caad85422350df7d541178_177910_300x0_resize_q50_h2_box_3.webp" width="300" height="550">
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



<p>dev-user作成時にダウンロードした認証情報のCSVに記載されているパスワードを入力し「サインイン」をクリックします。</p>


















  















  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/25-siginin-by-iam2_hu5fee4d0ee672ace9540c1d0387d2fc0a_97415_300x0_resize_q50_h2_box_3.webp" width="300" height="488">
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



<p>ログインできればOKです。</p>
<h3 id="iamを確認">IAMを確認</h3>
<p>dev-userはMFAの設定とアクセスキーの作成のみが行えて、それ以外は何もできないはずです。
「MFAを追加」ボタンが表示されていることが確認できました。
すでに紹介した手順なので割愛しますがルートアカウントだけではなくIAMユーザにもMFAを設定するようにしましょう。</p>

















  
















  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/26-show-iam-by-devuser_huc2849853100f645f44b4c90f4fa8474a_464716_1280x0_resize_q50_h2_box_3.webp" width="1280" height="362">
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



<p>アクセスキーの作成ができることも確認できます。</p>

















  
















  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/27-show-create-accesskey-button_hu287f5e7faf9d50632720bbf490294cea_429955_1280x0_resize_q50_h2_box_3.webp" width="1280" height="403">
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



<h3 id="s3を確認">S3を確認</h3>
<p>バケット一覧を表示できることが確認できました。</p>

















  
















  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/28-show-bucket-list_hu2dce62257602c64c6da3a0a7590c6552_459314_1280x0_resize_q50_h2_box_3.webp" width="1280" height="400">
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



<h3 id="lambdaを確認">Lambdaを確認</h3>
<p>関数の作成画面にて「実行ロール」にexec-lambdaを設定します。</p>

















  
















  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/29-create-lambda_hu9f48a13971e63679738db75829980a91_414585_1280x0_resize_q50_h2_box_3.webp" width="1280" height="549">
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



<p>関数の作成後にコードを修正します。
パラメータからバケット名とオブジェクト名を取得しオブジェクトに&quot;Hello, World!&quot;と書き込むだけのシンプルな処理です。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="kr">const</span> <span class="p">{</span> <span class="nx">S3Client</span><span class="p">,</span> <span class="nx">PutObjectCommand</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&#34;@aws-sdk/client-s3&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl">
</span></span><span class="line"><span class="ln"> 3</span><span class="cl"><span class="nx">exports</span><span class="p">.</span><span class="nx">handler</span> <span class="o">=</span> <span class="kr">async</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 4</span><span class="cl">  <span class="kr">const</span> <span class="nx">s3Client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">S3Client</span><span class="p">({</span> <span class="nx">region</span><span class="o">:</span> <span class="s2">&#34;ap-northeast-1&#34;</span> <span class="p">});</span>
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">  <span class="kr">const</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">    <span class="nx">Bucket</span><span class="o">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">bucketName</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">    <span class="nx">Key</span><span class="o">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">objectName</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">    <span class="nx">Body</span><span class="o">:</span> <span class="s2">&#34;Hello, World!&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="ln">10</span><span class="cl">
</span></span><span class="line"><span class="ln">11</span><span class="cl">  <span class="k">try</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">12</span><span class="cl">    <span class="kr">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">s3Client</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="k">new</span> <span class="nx">PutObjectCommand</span><span class="p">(</span><span class="nx">params</span><span class="p">));</span>
</span></span><span class="line"><span class="ln">13</span><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;Success&#34;</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">14</span><span class="cl">  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">15</span><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;Error&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">16</span><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="ln">17</span><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>ローカル開発環境上で上記コードとnode_modules一式をzipに固めてからアップロードします。</p>

















  
















  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/30-upload-lambda-zip_hu3198611d59be0baec1df59f02aa5cf41_289452_1280x0_resize_q50_h2_box_3.webp" width="1280" height="374">
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



<p>使用したサンプルコードは<a href="https://github.com/kengo-k/sample-lambda-nodejs">こちら</a>です。</p>
<p>アップロード完了後、コードが更新されていることを確認し、「Test」ボタンをクリックして実行します。</p>

















  
















  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/34-click-test-lambda_hu9891a52f57b64194173283579312f8f3_230557_800x0_resize_q50_h2_box_3.webp" width="800" height="485">
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



<p>テスト実行する際にコード内で利用しているパラメータをテストイベントとして設定します。</p>

















  
















  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/35-create-test-event_hu645d5901edd2cb190c25f8ab5178451a_219929_800x0_resize_q50_h2_box_3.webp" width="800" height="546">
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



<p>実行後、S3のバケット内にオブジェクトhello.txtが作成されていれば成功です。</p>

















  
















  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/36-show-new-object_hub69eaf982988bb19eb9fbc8e68c4ae9a_351173_1280x0_resize_q50_h2_box_3.webp" width="1280" height="345">
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



<h3 id="ロールの切り替え">ロールの切り替え</h3>
<p>dev-userからadminロールに切り替えることでIAMの管理作業を実施できることを確認します。
画面右上から「ロールの切り替え」をクリックします。</p>


















  















  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/31-click-role-switch_hu9ccb4cda19961230385ef322ff1e6c1f_82286_300x0_resize_q50_h2_box_3.webp" width="300" height="514">
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



<p>「アカウント」にアカウントID、「ロール」に&quot;admin&quot;、「表示名」に表示用の任意の名前を指定します。
ここではロール名と同じ&quot;admin&quot;と設定しました。入力後、「ロールの切り替え」ボタンをクリックします。</p>

















  
















  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/32-exec-role-switch_hubff6a6055069864e1cb40d439e56a0d3_155710_960x0_resize_q50_h2_box_3.webp" width="960" height="410">
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



<p>adminロールに切り替えたのでIAMを操作できるはずです。IAMの画面を表示してみます。</p>

















  
















  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
    
    
      
    
    
    
    
    <img src="/post/2023/04/understand-aws-iam/33-show-iam-policy-by-admin_hu4ca5143fa8ea88e258639a618383d76a_418441_1280x0_resize_q50_h2_box_3.webp" width="1280" height="424">
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  



<p>一例のみですが、ポリシーの一覧を表示してみました。ルートアカウントの時と同様にポリシーを編集できることが確認できます。</p>
<h2 id="おわりに">おわりに</h2>
<p>荒削りですが、AWSの権限管理の基本的な手順を紹介しました。役に立つ情報になったでしょうか？
今回は手順を学ぶこと、そしてルートアカウントを使わずに済む状態を作ることがメインテーマであり、設定内容はかなりざっくりで行いました。</p>
<p>個人的にはポリシーのActionを(ワイルドカードを使わず)きめ細かく設定するのはかなり手間なのではと感じました。
そしてポリシーの粒度はどの程度にすべきなのか悩みました。ポリシーは最大10個までしかアタッチできないので、
何でもかんでも細かく定義すればいいわけではなさそう。
その辺りの勘所は実務で運用をしてみないとなかなか掴めないのかもしれません(有識者のご意見お待ちしております)。</p>

    </div>
<div class="post_comments">
  
  
  
</div>




  </article>
<aside class="sidebar">
  <section class="sidebar_inner">
    <br>
    
  
  <div class="search">
    <input type="search" class="search_field form_field" placeholder='Search...' id="find" autocomplete="off" data-scope='post'>
    <label for="find" class="search_label"><svg class="icon">
  <title>search</title>
  <use xlink:href="#search"></use>
</svg>

    </label>
    
    <div class="search_results results"></div>
  </div>


    
    
    <div>
      <h2 class="mt-4 taxonomy" id="tags-section">Tags</h2>
      <nav class="tags_nav">
        <a href='https://just-plain-notes.blog/tags/blog/' class="post_tag button button_translucent" title="blog">
          BLOG
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://just-plain-notes.blog/tags/aws/' class="post_tag button button_translucent" title="aws">
          AWS
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://just-plain-notes.blog/tags/cloud/' class="post_tag button button_translucent" title="cloud">
          CLOUD
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://just-plain-notes.blog/tags/hugo/' class="post_tag button button_translucent" title="hugo">
          HUGO
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://just-plain-notes.blog/tags/programming/' class="post_tag button button_translucent" title="programming">
          PROGRAMMING
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://just-plain-notes.blog/tags/rust/' class="post_tag button button_translucent" title="rust">
          RUST
          <span class="button_tally">1</span>
        </a>
        
        
      </nav>
    </div>
    <h2 class="mt-4">Recent Posts</h2>
    <ul class="flex-column recent_posts">
      <li>
        <a href="https://just-plain-notes.blog/post/2023/06/beginning-rust/" class="nav-link" title="そろそろRustデビュー目指すか・・・開発環境を作ってHelloWorld &#43;αする！">そろそろRustデビュー目指すか・・・開発環境を作ってHelloWorld +αする！</a>
      </li>
      <li>
        <a href="https://just-plain-notes.blog/post/2023/04/understand-aws-iam/" class="nav-link" title="IAMをちゃんと使えてますか？AWSセキュリティの基本を理解しよう">IAMをちゃんと使えてますか？AWSセキュリティの基本を理解しよう</a>
      </li>
      <li>
        <a href="https://just-plain-notes.blog/post/2023/04/understand-hugo-template/" class="nav-link" title="Hugoのテンプレート(ショートコード)の使い方を整理しておく">Hugoのテンプレート(ショートコード)の使い方を整理しておく</a>
      </li>
      <li>
        <a href="https://just-plain-notes.blog/post/2023/04/start-blog/" class="nav-link" title="ブログをはじめることにしました">ブログをはじめることにしました</a>
      </li>
    </ul>
  </section>
</aside>

  
</div>
    </main><svg width="0" height="0" class="hidden">
  <symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="facebook">
    <path d="M437 0H75C33.648 0 0 33.648 0 75v362c0 41.352 33.648 75 75 75h151V331h-60v-90h60v-61c0-49.629 40.371-90 90-90h91v90h-91v61h91l-15 90h-76v181h121c41.352 0 75-33.648 75-75V75c0-41.352-33.648-75-75-75zm0 0"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18.001 18.001" id="twitter">
    <path d="M15.891 4.013c.808-.496 1.343-1.173 1.605-2.034a8.68 8.68 0 0 1-2.351.861c-.703-.756-1.593-1.14-2.66-1.14-1.043 0-1.924.366-2.643 1.078a3.56 3.56 0 0 0-1.076 2.605c0 .309.039.585.117.819-3.076-.105-5.622-1.381-7.628-3.837-.34.601-.51 1.213-.51 1.846 0 1.301.549 2.332 1.645 3.089-.625-.053-1.176-.211-1.645-.47 0 .929.273 1.705.82 2.388a3.623 3.623 0 0 0 2.115 1.291c-.312.08-.641.118-.979.118-.312 0-.533-.026-.664-.083.23.757.664 1.371 1.291 1.841a3.652 3.652 0 0 0 2.152.743C4.148 14.173 2.625 14.69.902 14.69c-.422 0-.721-.006-.902-.038 1.697 1.102 3.586 1.649 5.676 1.649 2.139 0 4.029-.542 5.674-1.626 1.645-1.078 2.859-2.408 3.639-3.974a10.77 10.77 0 0 0 1.172-4.892v-.468a7.788 7.788 0 0 0 1.84-1.921 8.142 8.142 0 0 1-2.11.593z"
      ></path>
  </symbol>
  <symbol aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="mail">
    <path  d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="calendar">
    <path d="M452 40h-24V0h-40v40H124V0H84v40H60C26.916 40 0 66.916 0 100v352c0 33.084 26.916 60 60 60h392c33.084 0 60-26.916 60-60V100c0-33.084-26.916-60-60-60zm20 412c0 11.028-8.972 20-20 20H60c-11.028 0-20-8.972-20-20V188h432v264zm0-304H40v-48c0-11.028 8.972-20 20-20h24v40h40V80h264v40h40V80h24c11.028 0 20 8.972 20 20v48z"></path>
    <path d="M76 230h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zM76 310h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zM76 390h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zm80-80h40v40h-40z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="github">
    <path d="M255.968 5.329C114.624 5.329 0 120.401 0 262.353c0 113.536 73.344 209.856 175.104 243.872 12.8 2.368 17.472-5.568 17.472-12.384 0-6.112-.224-22.272-.352-43.712-71.2 15.52-86.24-34.464-86.24-34.464-11.616-29.696-28.416-37.6-28.416-37.6-23.264-15.936 1.728-15.616 1.728-15.616 25.696 1.824 39.2 26.496 39.2 26.496 22.848 39.264 59.936 27.936 74.528 21.344 2.304-16.608 8.928-27.936 16.256-34.368-56.832-6.496-116.608-28.544-116.608-127.008 0-28.064 9.984-51.008 26.368-68.992-2.656-6.496-11.424-32.64 2.496-68 0 0 21.504-6.912 70.4 26.336 20.416-5.696 42.304-8.544 64.096-8.64 21.728.128 43.648 2.944 64.096 8.672 48.864-33.248 70.336-26.336 70.336-26.336 13.952 35.392 5.184 61.504 2.56 68 16.416 17.984 26.304 40.928 26.304 68.992 0 98.72-59.84 120.448-116.864 126.816 9.184 7.936 17.376 23.616 17.376 47.584 0 34.368-.32 62.08-.32 70.496 0 6.88 4.608 14.88 17.6 12.352C438.72 472.145 512 375.857 512 262.353 512 120.401 397.376 5.329 255.968 5.329z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 212 212" id="gitlab">
    <path d="M12.3 74.7h54L43.3 3c-1-3.6-6.4-3.6-7.6 0L12.3 74.8z" />
    <path d="M12.3 74.7L.5 111c-1 3.2 0 6.8 3 8.8l101.6 74-92.5-119z"/>
    <path d="M105 193.7l-38.6-119h-54l92.7 119z"/>
    <path d="M105 193.7l38.7-119H66.4l38.7 119z"/>
    <path d="M105 193.7l38.7-119H198l-93 119z"/>
    <path d="M198 74.7l11.6 36.2c1 3 0 6.6-3 8.6l-101.5 74 93-119z"/>
    <path d="M198 74.7h-54.3L167 3c1.2-3.6 6.4-3.6 7.6 0L198 74.8z"/>
  </symbol>
  <symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="rss">
    <circle cx="3.429" cy="20.571" r="3.429"></circle>
    <path d="M11.429 24h4.57C15.999 15.179 8.821 8.001 0 8v4.572c6.302.001 11.429 5.126 11.429 11.428z"></path>
    <path d="M24 24C24 10.766 13.234 0 0 0v4.571c10.714 0 19.43 8.714 19.43 19.429z"></path>
  </symbol>
  <symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="linkedin">
    <path d="M437 0H75C33.648 0 0 33.648 0 75v362c0 41.352 33.648 75 75 75h362c41.352 0 75-33.648 75-75V75c0-41.352-33.648-75-75-75zM181 406h-60V196h60zm0-240h-60v-60h60zm210 240h-60V286c0-16.54-13.46-30-30-30s-30 13.46-30 30v120h-60V196h60v11.309C286.719 202.422 296.93 196 316 196c40.691.043 75 36.547 75 79.688zm0 0"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 612 612" id="to-top">
    <path d="M604.501 440.509L325.398 134.956c-5.331-5.357-12.423-7.627-19.386-7.27-6.989-.357-14.056 1.913-19.387 7.27L7.499 440.509c-9.999 10.024-9.999 26.298 0 36.323s26.223 10.024 36.222 0l262.293-287.164L568.28 476.832c9.999 10.024 26.222 10.024 36.221 0 9.999-10.023 9.999-26.298 0-36.323z"></path>
  </symbol>
  <symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="carly">
    <path d="M504.971 239.029L448 182.059V84c0-46.317-37.682-84-84-84h-44c-13.255 0-24 10.745-24 24s10.745 24 24 24h44c19.851 0 36 16.149 36 36v108c0 6.365 2.529 12.47 7.029 16.971L454.059 256l-47.029 47.029A24.002 24.002 0 0 0 400 320v108c0 19.851-16.149 36-36 36h-44c-13.255 0-24 10.745-24 24s10.745 24 24 24h44c46.318 0 84-37.683 84-84v-98.059l56.971-56.971c9.372-9.372 9.372-24.568 0-33.941zM112 192V84c0-19.851 16.149-36 36-36h44c13.255 0 24-10.745 24-24S205.255 0 192 0h-44c-46.318 0-84 37.683-84 84v98.059l-56.971 56.97c-9.373 9.373-9.373 24.568 0 33.941L64 329.941V428c0 46.317 37.682 84 84 84h44c13.255 0 24-10.745 24-24s-10.745-24-24-24h-44c-19.851 0-36-16.149-36-36V320c0-6.365-2.529-12.47-7.029-16.971L57.941 256l47.029-47.029A24.002 24.002 0 0 0 112 192z"></path>
  </symbol>
  <symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="copy">
    <path d="M23 2.75A2.75 2.75 0 0 0 20.25 0H8.75A2.75 2.75 0 0 0 6 2.75v13.5A2.75 2.75 0 0 0 8.75 19h11.5A2.75 2.75 0 0 0 23 16.25zM18.25 14.5h-7.5a.75.75 0 0 1 0-1.5h7.5a.75.75 0 0 1 0 1.5zm0-3h-7.5a.75.75 0 0 1 0-1.5h7.5a.75.75 0 0 1 0 1.5zm0-3h-7.5a.75.75 0 0 1 0-1.5h7.5a.75.75 0 0 1 0 1.5z"></path>
    <path d="M8.75 20.5a4.255 4.255 0 0 1-4.25-4.25V2.75c0-.086.02-.166.025-.25H3.75A2.752 2.752 0 0 0 1 5.25v16A2.752 2.752 0 0 0 3.75 24h12a2.752 2.752 0 0 0 2.75-2.75v-.75z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512.001 512.001" id="closeme">
    <path d="M284.286 256.002L506.143 34.144c7.811-7.811 7.811-20.475 0-28.285-7.811-7.81-20.475-7.811-28.285 0L256 227.717 34.143 5.859c-7.811-7.811-20.475-7.811-28.285 0-7.81 7.811-7.811 20.475 0 28.285l221.857 221.857L5.858 477.859c-7.811 7.811-7.811 20.475 0 28.285a19.938 19.938 0 0 0 14.143 5.857 19.94 19.94 0 0 0 14.143-5.857L256 284.287l221.857 221.857c3.905 3.905 9.024 5.857 14.143 5.857s10.237-1.952 14.143-5.857c7.811-7.811 7.811-20.475 0-28.285L284.286 256.002z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="open-menu">
    <path d="M492 236H20c-11.046 0-20 8.954-20 20s8.954 20 20 20h472c11.046 0 20-8.954 20-20s-8.954-20-20-20zm0-160H20C8.954 76 0 84.954 0 96s8.954 20 20 20h472c11.046 0 20-8.954 20-20s-8.954-20-20-20zm0 320H20c-11.046 0-20 8.954-20 20s8.954 20 20 20h472c11.046 0 20-8.954 20-20s-8.954-20-20-20z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="instagram">
    <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id=youtube>
    <path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="stackoverflow">
    <path d="M21 27v-8h3v11H0V19h3v8h18z"></path><path d="M17.1.2L15 1.8l7.9 10.6 2.1-1.6L17.1.2zm3.7 14.7L10.6 6.4l1.7-2 10.2 8.5-1.7 2zM7.2 12.3l12 5.6 1.1-2.4-12-5.6-1.1 2.4zm-1.8 6.8l13.56 1.96.17-2.38-13.26-2.55-.47 2.97zM19 25H5v-3h14v3z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="xing">
    <path d="M18.188 0c-.517 0-.741.325-.927.66 0 0-7.455 13.224-7.702 13.657.015.024 4.919 9.023 4.919 9.023.17.308.436.66.967.66h3.454c.211 0 .375-.078.463-.22.089-.151.089-.346-.009-.536l-4.879-8.916c-.004-.006-.004-.016 0-.022L22.139.756c.095-.191.097-.387.006-.535C22.056.078 21.894 0 21.686 0h-3.498zM3.648 4.74c-.211 0-.385.074-.473.216-.09.149-.078.339.02.531l2.34 4.05c.004.01.004.016 0 .021L1.86 16.051c-.099.188-.093.381 0 .529.085.142.239.234.45.234h3.461c.518 0 .766-.348.945-.667l3.734-6.609-2.378-4.155c-.172-.315-.434-.659-.962-.659H3.648v.016z"/>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 71 55" id="discord">
    <path d="M60.1045 4.8978C55.5792 2.8214 50.7265 1.2916 45.6527 0.41542C45.5603 0.39851 45.468 0.440769 45.4204 0.525289C44.7963 1.6353 44.105 3.0834 43.6209 4.2216C38.1637 3.4046 32.7345 3.4046 27.3892 4.2216C26.905 3.0581 26.1886 1.6353 25.5617 0.525289C25.5141 0.443589 25.4218 0.40133 25.3294 0.41542C20.2584 1.2888 15.4057 2.8186 10.8776 4.8978C10.8384 4.9147 10.8048 4.9429 10.7825 4.9795C1.57795 18.7309 -0.943561 32.1443 0.293408 45.3914C0.299005 45.4562 0.335386 45.5182 0.385761 45.5576C6.45866 50.0174 12.3413 52.7249 18.1147 54.5195C18.2071 54.5477 18.305 54.5139 18.3638 54.4378C19.7295 52.5728 20.9469 50.6063 21.9907 48.5383C22.0523 48.4172 21.9935 48.2735 21.8676 48.2256C19.9366 47.4931 18.0979 46.6 16.3292 45.5858C16.1893 45.5041 16.1781 45.304 16.3068 45.2082C16.679 44.9293 17.0513 44.6391 17.4067 44.3461C17.471 44.2926 17.5606 44.2813 17.6362 44.3151C29.2558 49.6202 41.8354 49.6202 53.3179 44.3151C53.3935 44.2785 53.4831 44.2898 53.5502 44.3433C53.9057 44.6363 54.2779 44.9293 54.6529 45.2082C54.7816 45.304 54.7732 45.5041 54.6333 45.5858C52.8646 46.6197 51.0259 47.4931 49.0921 48.2228C48.9662 48.2707 48.9102 48.4172 48.9718 48.5383C50.038 50.6034 51.2554 52.5699 52.5959 54.435C52.6519 54.5139 52.7526 54.5477 52.845 54.5195C58.6464 52.7249 64.529 50.0174 70.6019 45.5576C70.6551 45.5182 70.6887 45.459 70.6943 45.3942C72.1747 30.0791 68.2147 16.7757 60.1968 4.9823C60.1772 4.9429 60.1437 4.9147 60.1045 4.8978ZM23.7259 37.3253C20.2276 37.3253 17.3451 34.1136 17.3451 30.1693C17.3451 26.225 20.1717 23.0133 23.7259 23.0133C27.308 23.0133 30.1626 26.2532 30.1066 30.1693C30.1066 34.1136 27.28 37.3253 23.7259 37.3253ZM47.3178 37.3253C43.8196 37.3253 40.9371 34.1136 40.9371 30.1693C40.9371 26.225 43.7636 23.0133 47.3178 23.0133C50.9 23.0133 53.7545 26.2532 53.6986 30.1693C53.6986 34.1136 50.9 37.3253 47.3178 37.3253Z"/>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 18" id="mastodon">
    <path
    fill="#ffffff"
    d="m 15.054695,9.8859583 c -0.22611,1.1632697 -2.02517,2.4363497 -4.09138,2.6830797 -1.0774504,0.12856 -2.1382704,0.24673 -3.2694704,0.19484 -1.84996,-0.0848 -3.30971,-0.44157 -3.30971,-0.44157 0,0.1801 0.0111,0.35157 0.0333,0.51194 0.24051,1.82571 1.81034,1.93508 3.29737,1.98607 1.50088,0.0514 2.8373104,-0.37004 2.8373104,-0.37004 l 0.0617,1.35686 c 0,0 -1.0498104,0.56374 -2.9199404,0.66742 -1.03124,0.0567 -2.3117,-0.0259 -3.80308,-0.42069 -3.23454998,-0.85613 -3.79081998,-4.304 -3.87592998,-7.8024197 -0.026,-1.03871 -0.01,-2.01815 -0.01,-2.83732 0,-3.57732 2.34385998,-4.62587996 2.34385998,-4.62587996 1.18184,-0.54277 3.20976,-0.77101 5.318,-0.7882499985409 h 0.0518 C 9.8267646,0.01719834 11.856025,0.24547834 13.037775,0.78824834 c 0,0 2.34377,1.04855996 2.34377,4.62587996 0,0 0.0294,2.63937 -0.32687,4.47183"/>
 <path
    fill="#000000"
    d="m 12.616925,5.6916583 v 4.3315297 h -1.71607 V 5.8189683 c 0,-0.88624 -0.37289,-1.33607 -1.1187604,-1.33607 -0.82467,0 -1.23799,0.53361 -1.23799,1.58875 v 2.30122 h -1.70594 v -2.30122 c 0,-1.05514 -0.4134,-1.58875 -1.23808,-1.58875 -0.74587,0 -1.11876,0.44983 -1.11876,1.33607 v 4.2042197 h -1.71607 V 5.6916583 c 0,-0.88527 0.22541,-1.58876 0.67817,-2.10922 0.46689,-0.52047 1.07833,-0.78727 1.83735,-0.78727 0.87816,0 1.54317,0.33752 1.98288,1.01267 l 0.42744,0.71655 0.42753,-0.71655 c 0.43961,-0.67515 1.10463,-1.01267 1.9828704,-1.01267 0.75893,0 1.37037,0.2668 1.83735,0.78727 0.45268,0.52046 0.67808,1.22395 0.67808,2.10922"/>
  </symbol>
</svg>

<footer class="footer">
  <div class="footer_inner wrap pale" style="grid-template-columns: 1fr;">
    <p>
      ©&nbsp;2023-&nbsp;<span class="year"></span>&nbsp;JUST PLAIN NOTES. All Rights Reserved;
      App icon by <a href="https://icons8.jp/" style="text-decoration: underline;">icons8</a>
    </p><a class="to_top" href="#documentTop">
  <svg class="icon">
  <title>to-top</title>
  <use xlink:href="#to-top"></use>
</svg>

</a>

  </div>
</footer>

<script type="text/javascript" src="https://just-plain-notes.blog/ja/js/bundle.2683a6735e1b94cf3d6339cea90b896ae22e2fc3e2a9ebe540b68fb02fd81e8d81624b51fff1237620201393c02783a6aedbfd8037394a4a3d6d979a9aad8b71.js" integrity="sha512-JoOmc14blM89YznOqQuJauIuL8PiqevlQLaPsC/YHo2BYktR//EjdiAgE5PAJ4Omrtv9gDc5Sko9bZeamq2LcQ==" crossorigin="anonymous"></script>

  <script src="https://just-plain-notes.blog/js/search.min.2fb30ebb55f60b5002efdb0d312d06233ea77f8d6ce2ec250791c9cc464a27ed84bd771480bd175b4f35cdb55b5dbbb5585277388a20123d3e34166767c66fe7.js"></script>

  </body>
</html>
